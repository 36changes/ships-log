(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{187:function(e,t,n){"use strict";n.r(t);n(493);var r=n(0),a=n.n(r),o=n(186),i=n.n(o),c=n(61),s=n(14),u=n.n(s),l=n(62),f=n.n(l),p=n(3);var d="undefined"!==typeof web3?window.web3.currentProvider:new p.providers.HttpProvider("https://mainnet.infura.io"),m=new p(d);function h(e){return+m.fromWei(e)}function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,w(t).apply(this,arguments))}var n,r,o;return n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.account,n=e.showImage,r=t.user?t.user.username:null,o=t.address,i=r||o.substring(2,8).toUpperCase();return a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat("https://opensea.io","/accounts/").concat(o)},n&&t?a.a.createElement("div",{style:{backgroundImage:'url("'+t.image+'")'}}):null,a.a.createElement("span",null,i))}}])&&g(n.prototype,r),o&&g(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");b(e.prototype,t&&t.prototype),t&&b(e,t)}(t,e),t}(a.a.Component),k=n(21),O=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  min-width: 200px;\n  img {\n    display: block;\n    height: 120px;\n    max-width: 100%;\n  }\n"]);function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e,t){try{var n=o[e](t),i=n.value}catch(e){return void a(e)}n.done?r(i):Promise.resolve(i).then(c,s)}function c(e){i("next",e)}function s(e){i("throw",e)}c()})}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==S(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var C=c.a.div.attrs({className:"card mx-2 mb-4"})(O),A=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return j(r,(n=r=j(this,(e=P(t)).call.apply(e,[this].concat(o))),r.state={errorMessage:null,creatingOrder:!1},n))}var n,r,o,i;return n=t,(r=[{key:"fulfillOrder",value:(i=x(u.a.mark(function e(){var t,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.order,r=t.accountAddress){e.next=3;break}return e.abrupt("return",alert("You need an Ethereum wallet to interact with this marketplace. Unlock your wallet, get MetaMask.io on desktop, or get Trust Wallet or Coinbase Wallet on mobile."));case 3:return e.prev=3,this.setState({creatingOrder:!0}),e.next=7,this.props.seaport.fulfillOrder({order:n,accountAddress:r});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(3),e.t0;case 12:return e.prev=12,this.setState({creatingOrder:!1}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[3,9,12,15]])})),function(){return i.apply(this,arguments)})},{key:"renderBuyButton",value:function(){var e=this,t=this.state.creatingOrder,n=h(this.props.order.currentPrice).toFixed(3),r=function(){var t=x(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.fulfillOrder();case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();return a.a.createElement("button",{disabled:t,onClick:r,className:"btn btn-primary w-100"},"Buy",t?"ing":""," for \u039e",n)}},{key:"renderAcceptOfferButton",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.state.creatingOrder,r=this.props.accountAddress,o=h(this.props.order.currentPrice).toFixed(3),i=function(){var n=x(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!r||t){n.next=3;break}return e.setState({errorMessage:"You do not own this asset!"}),n.abrupt("return");case 3:e.fulfillOrder();case 4:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}();return a.a.createElement("button",{disabled:n,onClick:i,className:"btn btn-success w-100"},"Sell",n?"ing":""," for \u039e",o)}},{key:"renderExpirationBadge",value:function(){var e=parseFloat(this.props.order.expirationTime);if(e<=0)return null;var t=f.a.duration(f.a.unix(e).diff(f()()));return a.a.createElement("span",{className:"badge bid-expiry-badge red"},a.a.createElement("i",{className:"tiny material-icons"},"timer"),a.a.createElement("span",{className:"expire-label"},"Expires in "),t.humanize())}},{key:"render",value:function(){var e=this.state.errorMessage,t=this.props,n=t.order,r=t.accountAddress,o=n.makerAccount,i=n.listingTime,c=n.asset,s=1e3*i.toNumber(),u=f()(s).local().fromNow(),l=r&&r.toLowerCase()===c.owner.address.toLowerCase();return a.a.createElement(C,null,a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"d-inline-block m-100",href:c.openseaLink},a.a.createElement("img",{className:"mx-auto",alt:"Asset artwork",src:c.imageUrl})),a.a.createElement("div",{className:"card-body h-25"},a.a.createElement("h5",{className:"card-title"},c.name),a.a.createElement("p",{className:"card-text text-truncate"},a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:c.openseaLink,className:"card-link"},c.assetContract.name," #",c.tokenId))),a.a.createElement("ul",{className:"list-group list-group-flush"},a.a.createElement("li",{className:"list-group-item"},"Offered by ",a.a.createElement(E,{account:o})),e?a.a.createElement("div",{className:"alert alert-warning mb-0",role:"alert"},e):a.a.createElement("li",{className:"list-group-item"},n.side===k.OrderSide.Buy?l?this.renderAcceptOfferButton():this.renderAcceptOfferButton(!1):null,l||n.side!==k.OrderSide.Sell?null:this.renderBuyButton())),a.a.createElement("div",{className:"card-footer"},a.a.createElement("small",{className:"text-muted"},"Posted ",u)))}}])&&N(n.prototype,r),o&&N(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");_(e.prototype,t&&t.prototype),t&&_(e,t)}(t,e),t}(a.a.Component);function T(e){return(T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return!t||"object"!==T(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var z=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return M(r,(n=r=M(this,(e=D(t)).call.apply(e,[this].concat(o))),r.state={orders:[],total:0,side:void 0,page:1},n))}var n,r,o,i,c;return n=t,(r=[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:(i=u.a.mark(function e(){var t,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.seaport.api.getOrders({side:this.state.side},this.state.page);case 2:t=e.sent,n=t.orders,r=t.count,this.setState({orders:n,total:r});case 6:case"end":return e.stop()}},e,this)}),c=function(){var e=this,t=arguments;return new Promise(function(n,r){var a=i.apply(e,t);function o(e,t){try{var o=a[e](t),i=o.value}catch(e){return void r(e)}o.done?n(i):Promise.resolve(i).then(c,s)}function c(e){o("next",e)}function s(e){o("throw",e)}c()})},function(){return c.apply(this,arguments)})},{key:"paginateTo",value:function(e){var t=this;this.setState({orders:[],page:e},function(){return t.fetchData()})}},{key:"toggleSide",value:function(e){var t=this;this.state.side===e&&(e=void 0),this.setState({orders:[],side:e},function(){return t.fetchData()})}},{key:"renderPagination",value:function(){var e=this;return a.a.createElement("nav",null,a.a.createElement("ul",{className:"pagination justify-content-center"},a.a.createElement("li",{className:"page-item "+(1===this.state.page?"disabled":"")},a.a.createElement("a",{className:"page-link",href:"#Log",onClick:function(){return e.paginateTo(e.state.page-1)},tabIndex:"-1"},"Previous")),a.a.createElement("li",{className:"page-item"},a.a.createElement("a",{className:"page-link",href:"#Log",onClick:function(){return e.paginateTo(e.state.page+1)}},"Next"))))}},{key:"render",value:function(){var e=this,t=this.state.orders,n=this.state.side===k.OrderSide.Sell,r=this.state.side===k.OrderSide.Buy;return a.a.createElement("div",{className:"container py-3",id:"Log"},a.a.createElement("div",{className:"mb-3"},"Filter by type:",a.a.createElement("div",{className:"btn-group ml-4",role:"group"},a.a.createElement("button",{type:"button",className:"btn btn-outline-primary "+(n?"active":""),"data-toggle":"button",onClick:function(){return e.toggleSide(k.OrderSide.Sell)}},"Sales"),a.a.createElement("button",{type:"button",className:"btn btn-outline-success "+(r?"active":""),"data-toggle":"button",onClick:function(){return e.toggleSide(k.OrderSide.Buy)}},"Bids"))),t.length>0?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"card-deck"},t.map(function(t,n){return a.a.createElement(A,Object.assign({},e.props,{key:n,order:t}))})),this.renderPagination()):a.a.createElement("div",{className:"text-center"},"Loading..."))}}])&&L(n.prototype,r),o&&L(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");B(e.prototype,t&&t.prototype),t&&B(e,t)}(t,e),t}(a.a.Component),F=n(104),I=G(["\n  border-bottom: 1px solid lightgrey;\n  padding: 10px;\n  text-align: center;\n  background-color: #f4f9fd;\n\n  h6 img {\n    width: 24px;\n  }\n"]),R=G(["\n  width: 150px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  border: 0;\n\n  @media(max-width: 600px) {\n    width: 80px;\n  }\n"]);function U(e){return(U="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return!t||"object"!==U(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.getPrototypeOf||function(e){return e.__proto__})(e)}function G(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var q=c.a.header(I),K=c.a.img(R),Q=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=J(this,Y(t).call(this,e))).state={accountAddress:null},n.seaport=new F.OpenSeaPort(d,{network:F.Network.Main}),n.web3=n.seaport.web3,n}var n,r,o;return n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.accountAddress=this.web3.eth.getAccounts(function(t,n){e.setState({accountAddress:n[0]})})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("a",{href:"https://github.com/ProjectOpenSea/ships-log"},a.a.createElement(K,{src:"https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png",alt:"Fork me on GitHub"})),a.a.createElement(q,null,a.a.createElement("h1",null,"The Ship's Log"),a.a.createElement("h6",null,a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/ProjectOpenSea/opensea-js"},a.a.createElement("img",{alt:"OpenSea logo",className:"mr-2",src:"/opensea-logo.png"}),"OpenSea.js")," example dapp")),a.a.createElement("main",null,a.a.createElement(z,{seaport:this.seaport,accountAddress:this.state.accountAddress})))}}])&&H(n.prototype,r),o&&H(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");W(e.prototype,t&&t.prototype),t&&W(e,t)}(t,e),t}(a.a.Component),V=(n(189),function(){window.dataLayer.push(arguments)});window.dataLayer=window.dataLayer||[],V("js",new Date),V("config","UA-111688253-4"),i.a.render(a.a.createElement(Q,null),document.getElementById("root"))},189:function(e,t,n){},350:function(e,t){},354:function(e,t){},436:function(e,t){},438:function(e,t){},499:function(e,t,n){n(498),e.exports=n(187)}},[[499,0,1]]]);
//# sourceMappingURL=main.e96bda8a.chunk.js.map